<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/leaflet-map/leaflet-map.html">

<dom-module id="ac-locationtracker">
  <template>
    <leaflet-map hidden="true">
      <leaflet-geolocation
      watch
      id="geolocator"
      on-locationfound="_locationchanged"
      enable-high-accuracy
      latitude="{{latitude}}"
      longitude="{{longitude}}"
      maximumAge=100
      accuracy="3"></leaflet-geolocation>
    </leaflet-map>
  </template>
  <script>
    Polymer({
      is: 'ac-locationtracker',
      properties: {
      },

      ready: function(){
        // TODO : add if development then this set - othersie use other set.
        //debugger;
      },

      attached: function(){
        console.log('ac-locationtracker attached.');
        //debugger;
      },
      detached: function(){
        //debugger;
        this.$.geolocator.container.stopLocate();
        //console.log('ac-locationtracker ending. Bye.');
      },

      _locationchanged: function(e,data){
        //console.log('ac-locationtracker -> I am now at',data.latitude,data.longitude);
        this.fire('locationChanged',data);
      }

    });
  </script>
</dom-module>
