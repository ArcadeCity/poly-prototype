<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/ac-style/ac-style.html">
<link rel="import" href="../bower_components/ac-input/ac-input.html">
<link rel="import" href="../bower_components/ac-button/ac-button.html">

<dom-module id="ac-password">
  <!-- Defines the element's style and local DOM -->
  <template>
    <style>
      :host {
        display: block;
      }

      .pascanvas {
      /*background-color: var(--ac-yellow);*/

      @apply(--locals-canvas);
      @apply(--base-structure);

      height: 100vh;
      @apply(--layout-vertical);
      @apply(--layout-center-center);
     }
     .enterpass {
     width: 100%;
     max-width: 500px;
     @apply(--layout-vertical);
     @apply(--layout-center-center);
    }
    </style>
 <template is="dom-if" if="{{isEmpty(password)}}">
    <div class="pascanvas">
    <div class="enterpass">
      <ac-input id="pas" color="yellow" id="inputpass" label="password" type="password" bind-value="{{password}}" center></ac-input>
      <template is="dom-if" if="{{wrongpass}}">
        <p class="redtxt">You entered the wrong pass</p>
      </template>
      <ac-button class="loginbtn" icon="arrowright" on-tap="setPass" small bg="base" txtcolor="yellow"></ac-button>
    </div>
    </div>
  </template>
  <!-- Creates the element's prototype and registers it -->
  <script>
    Polymer({
      is: 'ac-password',
      properties: {
        wrongpass: {
          type: Boolean,
          value: false
        },
        password: {
          type: String,
          notify: true
        }
      },

      attached: function() {
        // this.$.pas.addEventListener('bind-value-changed', function(e) {
        //   this.password = e.detail.value;
        // }.bind(this));
      },

      setPass: function() {
        sessionStorage.setItem('ac-password', this.password);
        // da hoort hier ni jonge.
        //app.set('route.path', '/');
      },

      ready: function(){
        var _password = sessionStorage.getItem('ac-password');
        if (_password){
          this.password = _password;
        }
      },
      isEmpty: function(){
        return (!this.password || this.password.toString().length < 1);
      }
    });
  </script>
</dom-module>
